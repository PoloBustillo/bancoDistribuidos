# ============================================
# ğŸ”§ CONFIGURACIÃ“N DEL SISTEMA BANCARIO
# ============================================
# Copia este archivo a .env y configura tus valores
# cp .env.example .env

# ============================================
# ğŸ—„ï¸ BASE DE DATOS POSTGRESQL
# ============================================
# Formato: postgresql://usuario:contraseÃ±a@host:puerto/nombre_bd
#
# ğŸ“Œ ESCENARIOS:
#
# 1ï¸âƒ£ docker-compose.full.yml (BD en Docker):
#    DATABASE_URL=postgresql://banco_user:${DB_PASSWORD}@postgres:5432/banco
#    (No necesitas configurar esto, se genera automÃ¡ticamente)
#
# 2ï¸âƒ£ docker-compose.yml (BD externa):
#    - BD en localhost del servidor:
DATABASE_URL=postgresql://banco_user:tu_password@localhost:5432/banco
#    - BD en otro servidor:
#    DATABASE_URL=postgresql://banco_user:tu_password@192.168.1.100:5432/banco
#    - BD en la nube (ej: Supabase, Railway, Neon):
#    DATABASE_URL=postgresql://banco_user:tu_password@db.ejemplo.com:5432/banco
#
# 3ï¸âƒ£ Desarrollo local (sin Docker):
#    DATABASE_URL=postgresql://postgres:postgres@localhost:5432/banco

# ============================================
# ğŸ” SEGURIDAD
# ============================================
# Secret para firmar JWT tokens (CAMBIAR EN PRODUCCIÃ“N)
# Genera uno seguro con: openssl rand -base64 32
JWT_SECRET=tu_secreto_super_seguro_aqui_cambiar_en_produccion_usar_openssl_rand

# Password de PostgreSQL (solo para docker-compose.full.yml)
# Usado para crear la base de datos en el contenedor
DB_PASSWORD=banco_password_2024_cambiar_en_produccion

# ============================================
# ğŸŒ ENTORNO
# ============================================
# Entorno: development | production | test
NODE_ENV=production

# ============================================
# ğŸŒ CORS (Cross-Origin Resource Sharing)
# ============================================
# Dominios autorizados para conectarse al backend (separados por comas, SIN espacios)
# âš ï¸ IMPORTANTE: No incluir slash (/) al final
#
# Ejemplos:
# - ProducciÃ³n: https://banco-distribuidos.vercel.app,https://tudominio.com
# - Desarrollo: http://localhost:3000,http://localhost:3001
# - Wildcard (âš ï¸ INSEGURO, solo para testing): *
CORS_ORIGIN=https://banco-distribuidos.vercel.app,https://banco.psic-danieladiaz.com

# ============================================
# ğŸšª PUERTOS
# ============================================
# Puerto del coordinador (gestiona locks)
COORDINADOR_PORT=4000

# Puertos de los workers (API REST)
WORKER_1_PORT=3001
WORKER_2_PORT=3002
WORKER_3_PORT=3003

# ============================================
# ğŸ”§ CONFIGURACIÃ“N AVANZADA (Opcional)
# ============================================

# URL del coordinador (solo para workers)
# Dentro de Docker: http://coordinador:4000
# Desarrollo local: http://localhost:4000
# COORDINADOR_URL=http://coordinador:4000

# Timeout de sesiÃ³n (en milisegundos)
# Default: 1800000 (30 minutos)
# SESSION_TIMEOUT=1800000

# Modo de sesiÃ³n Ãºnica (true = 1 sesiÃ³n por usuario, false = mÃºltiples dispositivos)
# SINGLE_SESSION=true

# Rate limiting (requests por minuto por IP)
# RATE_LIMIT_MAX=60

# Nivel de logs (error | warn | info | debug)
# LOG_LEVEL=info

# ============================================
# ğŸ“ MODO DEMOSTRACIÃ“N (Demo Mode)
# ============================================
# âš ï¸ DEPRECADO: ENABLE_OPERATION_DELAY ya no se usa
#
# El modo demostraciÃ³n ahora se controla desde el frontend mediante
# el parÃ¡metro de consulta ?demo=true en las peticiones HTTP.
#
# Ejemplos:
# - POST /api/banco/transferir?demo=true
# - POST /api/banco/depositar?demo=true
# - POST /api/banco/retirar?demo=true
#
# Cuando estÃ¡ activado, agrega un delay aleatorio a las operaciones:
# - Transferencias: 1-4 segundos
# - DepÃ³sitos/Retiros: 0.5-2.5 segundos
#
# Esto permite visualizar mejor el funcionamiento de los locks distribuidos
# durante presentaciones educativas sin necesidad de hacer deploy.

# ============================================
# ğŸ“ NOTAS IMPORTANTES
# ============================================
#
# ğŸ”’ SEGURIDAD:
# - NUNCA commitees el archivo .env al repositorio
# - Usa variables diferentes para development/production
# - Rota JWT_SECRET periÃ³dicamente
# - Usa contraseÃ±as fuertes (>20 caracteres, alfanumÃ©ricos + sÃ­mbolos)
#
# ğŸ³ DOCKER:
# - Si usas docker-compose.full.yml, solo necesitas configurar DB_PASSWORD
# - Si usas docker-compose.yml, configura DATABASE_URL apuntando a tu BD externa
# - Si tu BD estÃ¡ en localhost y usas Docker, puede que necesites network_mode: "host"
#
# ğŸ’» DESARROLLO LOCAL:
# - Copia este archivo tambiÃ©n a worker/.env y coordinador/.env si usas bun run dev
# - Cada servicio puede tener su propio .env local
#
# ğŸ”— REFERENCIAS:
# - DocumentaciÃ³n completa: README.md
# - Troubleshooting: README.md#troubleshooting-comÃºn
# - Docker setup: DOCKER-SETUP.md
